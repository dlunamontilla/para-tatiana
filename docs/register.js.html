<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: register.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: register.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// @ts-check

/**
 * 
 * @param {any} input Evalur si es o no un campo de formulario.
 * 
 * @returns { boolean }
 */
function isInput(input) {
    return Object.prototype.toString.call(input) === "[object HTMLInputElement]";
}

/**
 *
 * @param {string|number} text Ingrese un texto para sanearlo.
 *
 * @returns { string } Devuelve un texto saneado y codificado.
 */
function sanitizeText(text) {
    const pattern = /[&lt;>]/gi;
    const replace = {
        "&lt;": "&amp;lt;",
        ">": "&amp;gt;",
    };

    text = String(text).replace(pattern, (string) => {
        return replace[string];
    });

    return text;
}

/**
 *
 * @param {HTMLFormElement} form Coloque su formulario
 * como parámetro de getDataForm para capturar sus datos
 * y devolver un objeto.
 *
 * @return { Object&lt;string, string|number>} Devuelve un
 * objeto con los datos capturados del formulario. Esto lo
 * hace de forma automática sin necesidad de saberse los
 * campos del formulario. El único requisito es que dichos
 * campos del formulario deban tener el atributo «name» para
 * que sus datos sean capturados.
 *
 */
function getFormData(form) {
    /** @type { Object&lt;string, string|number> } */
    const data = {};

    for (let field of form.elements) {
        const radio = field["type"];

        if (!("name" in field))
            continue;
        if (radio === "radio" &amp;&amp; !radio.checked)
            continue;
        if (!(field["name"].length > 0))
            continue;

        data[field["name"]] = sanitizeText(field["value"].trim());
    }

    // Limpiar los datos del formulario
    form.reset();

    return data;
}

/**
 *
 * Esta función guarda los datos del formulario en localStorge.
 * 
 * @param { string } nameRegister Nombre del registro a
 * guardar en el navegador.
 *
 * @param {Object&lt;string, string|number> } dataForm
 * Debe pasar como parámetro el objeto devuelto por el formulario
 * para guardar los datos en localStorage. Se guardarán como un
 * Array de objetos.
 *
 * @returns { void }
 */
function saveFormData(nameRegister, dataForm) {
    const register = localStorage.getItem(nameRegister);
    const data = [];

    // Si los datos en localStorage existen se recuperarán
    // y se enviarán a _data[]:
    if (register) {
        data.push(...JSON.parse(register));
    }

    data.push({id: data.length + 1, ...dataForm});

    localStorage.setItem(nameRegister, JSON.stringify(data));
}

/**
 *
 * @param {string} nameRegister Ingrese el nombre de registro
 * previamente almacenado.
 *
 * @returns { Array&lt;Object&lt;string, string|number>> }
 * Devuelve un Array vacío en el caso de no existir el
 * registro solicitado.
 */
function getRegister(nameRegister) {
    const data = localStorage.getItem(nameRegister);
    return data ? JSON.parse(data) : [];
}

/**
 *
 * @param { string } inputText Ingrese un criterio de búsqueda
 * para filtrar los datos.
 *
 * @param {Array&lt;Object&lt;string, string|number>>} data Se
 * pasar como parámetro un Array de objetos para filtrarlos.
 *
 * @return { Array&lt;Object&lt;string, string|number>> }
 */
function searchData(inputText, data) {
    const pattern = /[\+\*\?\^\$\.\[\]\{\}\(\)\|\/]/g;

    inputText = inputText.replace(pattern, (string, a, b) => {
        return `\\${string}`;
    });

    const findName = new RegExp(`${inputText || "()"}+`, "gi");

    console.log(findName);

    return data.filter((object) => {
        for (let property in object) {
            const value = object[property];
            if (findName.test(String(value)))
                return true;
        }
    }, []);
}

/**
 * 
 * @param {number} id Debe ingresar el ID del registro para seleccionarlo
 * y eliminarlo.
 * 
 * @param {string} nameRegister Seleccione el nombre de registro almacenado
 * en localStorage.
 * 
 * @return { void }
 */
function deleteRegister(id, nameRegister) {
    const data = getRegister(nameRegister);
    const dataFiltered = data.filter(object => object.id !== id);
    localStorage.setItem(nameRegister, JSON.stringify(dataFiltered));
}

export {
    sanitizeText,
    getFormData,
    saveFormData,
    getRegister,
    searchData,
    deleteRegister
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#deleteRegister">deleteRegister</a></li><li><a href="global.html#getFormData">getFormData</a></li><li><a href="global.html#getRegister">getRegister</a></li><li><a href="global.html#isInput">isInput</a></li><li><a href="global.html#sanitizeText">sanitizeText</a></li><li><a href="global.html#saveFormData">saveFormData</a></li><li><a href="global.html#searchData">searchData</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sat Nov 20 2021 23:30:10 GMT-0400 (hora de Venezuela)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
